<Page x:Class="CustomOOBE.Views.UserSetupPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      mc:Ignorable="d"
      d:DesignHeight="1080" d:DesignWidth="1920"
      Background="Transparent"
      Loaded="Page_Loaded">

    <Grid>
        <!-- Usar ScrollViewer para permitir scroll en pantallas peque침as -->
        <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
            <Grid>
                <Grid.ColumnDefinitions>
                    <!-- Columna izquierda flexible para el panel animado -->
                    <ColumnDefinition Width="0.4*" MinWidth="0" MaxWidth="800"/>
                    <!-- Columna derecha para el contenido -->
                    <ColumnDefinition Width="0.6*" MinWidth="400"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="1" VerticalAlignment="Center" HorizontalAlignment="Center" 
                           MaxWidth="700" Opacity="0" x:Name="ContentPanel" Margin="20">

            <!-- T칤tulo -->
            <TextBlock Style="{StaticResource TitleTextStyle}"
                       Text="쯈ui칠n usar치 esta computadora?"
                       TextWrapping="Wrap"
                       Margin="0,0,0,30"/>

            <!-- Selector de avatar -->
            <Grid Margin="0,0,0,30">
                <StackPanel HorizontalAlignment="Center">
                    <!-- Avatar seleccionado (grande) -->
                    <Border Width="120" Height="120"
                            CornerRadius="60"
                            BorderThickness="3"
                            BorderBrush="{DynamicResource AccentBrush}"
                            Background="{DynamicResource SecondaryBackgroundBrush}"
                            Margin="0,0,0,20">
                        <Border.Effect>
                            <DropShadowEffect BlurRadius="20" ShadowDepth="0" Opacity="0.3"/>
                        </Border.Effect>
                        <Image x:Name="SelectedAvatarImage"
                               Stretch="UniformToFill"
                               Source="/Assets/Avatars/default.png"/>
                    </Border>

                    <!-- Lista de avatares disponibles -->
                    <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Disabled" MaxWidth="600">
                        <WrapPanel x:Name="AvatarPanel" HorizontalAlignment="Center" Orientation="Horizontal">
                            <!-- Los avatares se agregar치n din치micamente -->
                        </WrapPanel>
                    </ScrollViewer>

                    <!-- Bot칩n para tomar foto con c치mara -->
                    <Button Style="{StaticResource SecondaryButtonStyle}"
                            Content="游닝 Tomar foto con c치mara"
                            Click="TakePhotoButton_Click"
                            Margin="0,20,0,0"
                            Padding="20,10"/>
                </StackPanel>
            </Grid>

            <!-- Campo de nombre de usuario -->
            <TextBlock Style="{StaticResource SubtitleTextStyle}"
                       Text="Nombre de usuario"
                       HorizontalAlignment="Left"
                       Margin="0,0,0,10"/>

            <TextBox x:Name="UsernameTextBox"
                     Style="{StaticResource ModernTextBoxStyle}"
                     MaxLength="20"
                     TextChanged="UsernameTextBox_TextChanged"
                     Margin="0,0,0,10"/>

            <TextBlock x:Name="UsernameErrorText"
                       Foreground="Red"
                       FontSize="14"
                       Visibility="Collapsed"
                       Margin="0,0,0,20"/>

            <!-- Botones de navegaci칩n -->
            <Grid Margin="0,30,0,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <Button Grid.Column="0"
                        x:Name="BackButton"
                        Style="{StaticResource SecondaryButtonStyle}"
                        Content="Atr치s"
                        Click="BackButton_Click"
                        HorizontalAlignment="Left"
                        MinWidth="120"/>

                <Button Grid.Column="1"
                        x:Name="NextButton"
                        Style="{StaticResource PrimaryButtonStyle}"
                        Content="Continuar"
                        Click="NextButton_Click"
                        HorizontalAlignment="Right"
                        MinWidth="120"
                        IsEnabled="False"/>
            </Grid>

        </StackPanel>
            </Grid>
        </ScrollViewer>
    </Grid>
</Page>
